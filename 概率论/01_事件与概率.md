## 随机现象与统计规律性

&emsp;&emsp;注意观察，我们会发现许多事情在一定的条件下必然会发生，比如太阳从东边升起，也有许多事情在一定的条件下必然不会发生，比如太阳从西边升起。这样我们就有了几个新但无聊的定义：

- 在一定条件下必然会发生的事件称为**必然事件**
- 在一定条件下必然不会发生的事件称为**不可能事件**

&emsp;&emsp;值得注意的是，尽管**必然事件**与**不可能事件**的形式是相反的，但是两者的实质是相同的。必然事件的反面就是不可能事件，而不可能事件的反面就是必然事件。所有的这种现象称为**决定性现象(也叫确定性现象，Certainty phenomena)**，也就是要么一定会发生，要么一定不会发生。

&emsp;&emsp;但是我们同时会注意到生活中其实还有另外一种现象，比如说同一生产线上生产出来的灯泡寿命是有差异的（总不可能所有的灯泡寿命都恰好是1000个小时，对吧），同一门火炮发射出的炮弹的落点是不一样的等等，在基本不变的条件下，一系列实验或者观察会得到不同的结果，这种现象称为**随机现象(Random phenomena)**。

&emsp;&emsp;对于随机现象我们通常关心的是在实验或观察中某个结果是否出现，这些结果称为**随机事件**，简称为**事件**(event)。比如过十字路口时可能会遇上各种颜色的交通灯，遇上红灯就是一个随机事件。

&emsp;&emsp;但是，如果随机事件真的十分的“随机”，那也没有概率论存在的必要了。恩格斯曾经说过，表面上是偶然性在起作用的地方，这种偶然性始终是受内部隐蔽着的规律支配的，而问题只是在于发现这些规律。事实也确实是这样，人们经过长期的实践发现，虽然个别随机事件在某次实验或观察中可以出现也可以不出现，但在大量实验中它却呈现出明显的规律性-**频率稳定性**

&emsp;&emsp;对于随机事件 $A$ ，若在 $N$ 次实验中出现了 $n$ 次，则称

$$\begin{align\*}
F_N(A)=\frac{n}{N}
\end{align\*}$$

&emsp;&emsp;为随机事件 $A$ 在 $N$ 次实验中出现的**频率**。

&emsp;&emsp;比如说，如果抛一枚质地均匀的硬币，直观上出现正面与出现反面的机会应该相等，即在大量实验中出现正面的频率应该接近50%，为了验证这个观点，历史上有不少人做过这个实验（甚至不惜抛硬币抛成千上万次），结果确实接近50%。再比如说，在人类的生育中，男婴的出生率约为 $\frac{22}{43}$ 。换言之，**随机现象有其偶然性的一面，也有其必然性的一面，这种必然性表现为大量实验中随机事件出现的频率的稳定性，即一个随机事件出现的频率常在某个固定的常数附近摆动**，这种规律性我们称之为**统计规律性**。

&emsp;&emsp;频率的稳定性说明**随机事件发生的可能性大小是随机事件本身固有的、不随人们意志而改变的一种客观属性，因此可以对其进行度量**。对于一个随机事件 $A$ ，我们用**P(A)来表示该事件发生的可能性大小，称P(A)为随机事件A的概率(probability)**。而且我们似乎可以做这样的猜想：当N足够大时, $F_N(A)$ 与 $P(A)$ 应充分接近。实际上，在历史上这一猜想一直是概率论研究的一个重大课题。

> 对于随机现象，单纯考虑它可能出现的结果，意义并不大，但是指出各种结果出现的可能性的大小却具有很大意义，这也是概率论作为一个数学分支存在的重要意义。

## 样本空间与事件

&emsp;&emsp;不难理解，对于随机现象的研究必然要联系到对客观的事物进行调查、观察或者实验，我们称其为“随机试验”。一个实验如果满足以下的条件就可以被称为随机试验，记为E：
- 实验可以在相同的条件下重复进行（可重复性）
- 实验的所有结果明确可知，并且不止一个（全部可知性）
- 每次实验只能出现一个结果，事先不能确定（随机性）

&emsp;&emsp;为了研究随机试验，我们首先需要知道的就是这个实验可能出现的结果，这些结果就被称为**样本点（sample point，又叫做基本事件）**，一般用 $\omega$ 来表示，样本点的全体构成了**样本空间（sample space）**，一般用 $\Omega$ 来表示。

&emsp;&emsp;那到底什么是事件呢？**事件是样本空间中具有某种性质的样本点的集合**。有些似懂非懂对吧，我们拿抛硬币来举个例子，连续抛掷一枚硬币两次，观察出现正反面的情况：
- 首先这个实验有四个样本点，分别是(正,正)，(正,反)，(反,正)，(反,反)
- 列出样本点之后，自然就知道了样本空间 $\Omega=\\{(正,正)，(正,反)，(反,正)，(反,反)\\}$
- 我们考虑事件 $A$ ：第一次抛掷结果为正面，那么事件 $A$ 就由两个样本点组成，分别是(正,正)，(正,反)，也就是 $A=\\{(正,正)，(正,反)\\}$

&emsp;&emsp;从上面抛硬币的例子我们也不难看出，事件发生当且仅当它所包含的某一个样本点出现。考虑极端情况，把样本空间 $\Omega$ 也视作一个事件，因为在每次实验中必然出现 $\Omega$ 中的某个样本点，即 $\Omega$ 必然发生，所以常称 $\Omega$ 为**必然事件**，同理，把空集 $\varnothing$ 也作为一个事件，因为其不包含任何样本点，所以称其为**不可能事件**。

&emsp;&emsp;也因为事件的本质就是集合，所以所有适用于集合上的关系和运算都同样适用于事件，只是说法不同而已（已经学过离散数学的同学可以直接跳过这里）。
- 包含关系  
若 $A$ 中的每一个样本点都包含在 $B$ 中，则记为 $A\subset B$ 或者 $B\supset A$ ，并称A被包含于B或者B包含A，这时事件A发生必然会导致事件B发生。
- 相等关系  
如果 $A\subset B$ 与 $B\subset A$同时成立，则称 $A$ 与 $B$ 等价，此时这两个事件会同时发生，也可以看作是同一个事件。
- 并运算  
事件 $A$ 与 $B$ 的并表示 $A$ 与 $B$ 所有样本点的集合，记为 $A\cup B$ ，也就是指事件 $A$ 与 $B$ 中至少发生一个。
- 交运算  
事件 $A$ 与 $B$ 的交表示同时属于 $A$ 与 $B$ 的样本点的集合，记为 $A\cap B$ ，也就是指事件 $A$ 与 $B$ 同时发生。
- 差运算  
事件 $A$ 与 $B$ 的差表示包含在 $A$ 但不包含在 $B$ 中的样本点的集合，记为 $A-B$ ，也就是事件 $A$ 发生而事件 $B$ 不发生。
- 逆事件  
对于事件 $A$ ，所有不包含在 $A$ 中的样本点所组成的事件称为 $A$ 的逆事件，也称为 $A$ 的对立事件，记为 $\overline{A}$ ，显然该定义等价于 $A\cup\overline{A}=\Omega$ 并且 $A\cap\overline{A}=\varnothing$ 。
- 互不相容  
若事件 $A$ 与 $B$ 不能同时发生，则称其为互不相容的，也就是有 $A\cap B=\varnothing$ ，显然事件 $A$ 与其逆事件是互不相容的，但互不相容的事件不一定互为逆事件。

&emsp;&emsp;对于事件运算的顺序，我们规定先做逆运算，再做交运算，最后进行并或差运算。至于事件运算的其他内容，比如 $n$ 个事件的并或交，事件运算的交换律，结合律，分配律，德摩根律等等，请移步至离散数学文档查阅，此处不表。

&emsp;&emsp;现在我们有了事件的定义，但这还不够，不要忘记，我们要研究的是事件的概率，那么我们该如何定义事件的概率呢？

&emsp;&emsp;我们先来考虑只有有限个样本点的空间（**有限样本空间**）：若 $\Omega$ 是有限样本空间，其样本点为 $\omega_1,\omega_2,\omega_3,...,\omega_n$ ，我们可以将 $\Omega$ 任意子集作为事件，此时，样本点可以作为单元素集，当然是事件，我们就可以记该样本点的概率为 $P(\omega_i)$ ，用于表示该样本点出现的可能性大小，这是非负数，并且显然有：

$$\begin{align\*}
P(\omega_1)+P(\omega_2)+...+P(\omega_n)=1
\end{align\*}$$

&emsp;&emsp;这样我们就定义了样本点的概率，对于事件，我们将**事件的概率定义为事件中各样本点的概率之和**。

## 古典概型

&emsp;&emsp;我们先讨论一种最简单的随机现象，这种随机现象具有以下两个特征：
- 实验的全部可能结果有有限个，不妨设为 $n$ 个，记为 $\omega_1,\omega_2,\omega_3,...,\omega_n$ ，而且他们两两是互不相容的，即**样本空间是有限样本空间**。
- 每个样本点发生的概率是相等的，也就是有 $P(\omega_1)=P(\omega_2)=...=P(\omega_n)=\frac{1}{n}$ 

&emsp;&emsp;这一类随机现象的数学模型就称为**古典概型**。这类模型简单直观，并且在生活中也有重要应用。

&emsp;&emsp;对于任何事件 $A$ ，由于其总可以表示为样本点的集合，不妨记为 $A=\\{\omega_{i_1},\omega_{i_2},...,\omega_{i_m}\\}$ ，那么会有：

$$\begin{align\*}
P(A)=P(\omega_{i_1})+P(\omega_{i_2})+...+P(\omega_{i_m})\\
=\frac{1}{n}+\frac{1}{n}+...+\frac{1}{n}=\frac{m}{n}
\end{align\*}$$

&emsp;&emsp;所以在古典概型中，事件 $A$ 的概率是一个分数，其分母是样本点的总数，分子是事件 $A$ 中包含的样本点的个数，由于 $\omega_{i_1},\omega_{i_2},...,\omega_{i_m}$ 的出现必然会导致 $A$ 的发生，即它们的出现对 $A$ 的发生“有利”，所以我们称 $\omega_{i_1},\omega_{i_2},...,\omega_{i_m}$ 是 $A$ 的有利场合，所以就有：

$$\begin{align\*}
P(A)=\frac{A的有利场合的数目}{样本点总数}
\end{align\*}$$

> 在1812年，法国数学家拉普拉斯把上式作为概率的一般定义，而现在通常称它为概率的古典定义，因为其只适用于古典概型。

&emsp;&emsp;但是需要注意的是，尽管古典概型的计算公式比较简单，但古典概型中许多概率的计算相当困难而且富有技巧，经常需要一些排列组合公式。请移步至离散数学文档查阅，此处不表。

&emsp;&emsp;下面我们来补充几个关于古典概型的例子。

例1：设甲有 $n+1$ 个硬币，乙有 $n$ 个硬币，双方投掷之后进行比较，求甲掷出的正面数比乙掷出的正面数多的概率。

&emsp;&emsp;分析：这个问题乍一看似乎要经过十分复杂的计算，但是我们可以充分利用它特有的对称性并选择适当的样本空间，就能够迅速求解。

&emsp;&emsp;若以事件 $A$ 表示“甲的正面数 $>$ 乙的正面数”，那么 $\overline{A}$ 表示“甲的正面数 $\leqslant$ 乙的正面数”，不难理解， $\overline{A}$ 同时也表示“甲的反面数 $>$ 乙的反面数”，再加上硬币的正面与反面本质是相同的，所以会有 $P(A)=P(\overline{A})$ ，我们构造样本空间 $\Omega=\\{A,\overline{A}\\}$ ，便很容易能够写出 $P(A)=\frac{1}{2}$ 。

&emsp;&emsp;值得注意的是，上述题目中样本空间的构造并不是随意的。因为样本空间要包含随机试验所有可能的结果，而之所以能出现上述的构造方式是因为甲的硬币数目只比乙的硬币数目多1（请仔细思考此处）。

例2：（投球入格）设有 $n$ 个球，每个球都能以同样的概率 $\frac{1}{N}$ 落到 $N(N\geqslant n)$ 个格子的每一个格子中，试求：
- (1)在这 $N$ 个格子中指定 $n$ 个格子，求这 $n$ 个格子各有一个球的概率。
- (2)随便 $n$ 个格子中各有一个球的概率。
- (3)在所指定的某一个格子中恰好放入 $k$ 个球的概率。

&emsp;&emsp;分析：这显然是一个古典概型问题。由乘法原理，总共有 $N^n$ 种可能的结果，也就是对于样本空间 $\Omega$ ，有 $|\Omega|=N^n$ 。对于问题1中的事件 $A_1$ ， $n$ 个格子各有一个球，也就是这 $n$ 个球在这 $n$ 个格子里全排列，总共有 $n!$ 种可能。因而所求概率为 $P_1=\frac{n!}{N^n}$ 。对于问题2中的事件 $A_2$ ，随便 $n$ 个格子中各有一个球，只需要先从 $N$ 个格子中选出 $n$ 个，之后再让这 $n$ 个球在这 $n$ 个格子里全排列，因而所求概率为 $P_1=\frac{\binom{N}{n}n!}{N^n}$ ，对于问题3中的 $A_3$ ，因为有一个格子已经被指定了，所以需要从 $n$ 个球里选出 $k$ 个，而剩余的 $n-k$ 个球还有 $N-1$ 个格子可以随意使用，所以概率 $P_3=\frac{\binom{n}{k}(N-1)^{n-k}}{N^n}$ 。

> 实际上，例2中的问题是古典概型中一个相当经典的问题，不少实际问题都可以归结为这个问题。比如下面会提到的概率论历史上有名的生日问题。

例2.1：求参加某次集会的 $n$ 个人中至少有两个人生日相同的概率 $p_n$ 。

&emsp;&emsp;分析：如果把这 $n$ 个人看作是例2中的 $n$ 个球，而把一年的365天作为365个格子，那么问题所求的概率就是：

$$\begin{align\*}
p_n=1-P_2=1-\frac{365\times364\times...\times(365-n+1)}{365^n}
\end{align\*}$$

> 直觉上，一年365天，至少有两个人生日相同的概率可能会非常小，但实际上恰好相反。当n=23时，同生日的概率就达到了0.507，当n=40时，就达到了0.891，当n=60时，概率就达到了0.994，此时几乎可以肯定必有两个人同生日。

例3：（抽奖公平性）口袋中有 $a$ 只黑球， $b$ 只白球，它们除颜色不同外，其他方面没有任何差别，现在将球随机地一个一个摸出来，求第 $k(1\leqslant k\leqslant a+b)$ 次摸出的是黑球的概率。

&emsp;&emsp;方法一：把每个球都看作是不同的，将球一个一个摸出来，也就是这些球的一个排列，所以对于样本空间 $\Omega_1$ ，就会有 $|\Omega_1|=(a+b)!$ ，而符合题意的排列就是第 $k$ 个位置上是黑球的排列，我们只需要从 $a$ 只黑球中选出一个黑球放在这里，剩余的 $a+b-1$ 个球全排列即可，也就是有：

$$\begin{align\*}
P_k=\frac{a\times(a+b-1)!}{(a+b)!}=\frac{a}{a+b}\\
\end{align\*}$$

&emsp;&emsp;方法二：如果把相同颜色的球看作是没有区别的，那么就是在 $a+b$ 个位置上选出 $a$ 个位置来放黑球，所以对于样本空间 $\Omega_2$ ，就会有 $|\Omega_2|=\binom{a+b}{a}$ ，而符合题意的选法就是在剩余的 $a+b-1$ 个位置上放置 $a-1$ 个黑球，因为我们要去除已经放置了黑球的第 $k$ 个位置，也就是有：

$$\begin{align\*}
P_k=\frac{\binom{a+b-1}{a-1}}{\binom{a+b}{a}}=\frac{a}{a+b}\\
\end{align\*}$$

&emsp;&emsp;因为选取的样本空间不同，所以两种解法不同，但最后还是得出了相同的答案。这个问题对应于实际生活中的抽签问题，抽奖箱中有一些有效奖券和一些无效奖券，不论是第几个抽奖的人，抽中有效奖券的概率是相等的。

&emsp;&emsp;古典概型最直观的应用就是产品抽样检测，因为有时面对数以万计的产出，进行全面的检测是不可能的或者不经济的，而且有时产品的检验方法具有破坏性，所以采用抽样检查，随机抽出若干件产品来检验，任何一件产品被抽到的可能性是一样的（古典概型），这样就能从局部反映出整体，判断出整批产品的质量。而抽样检查主要有两类，一类是有放回抽样，被抽出的产品检验后仍放回产品中，第二次抽时仍有可能被抽到，另一类是无放回抽样，被抽到的产品不会放回，那么以后也不会再被抽到。这两个抽样的方式得到的结果是不同的，下面我们来具体计算一下。

&emsp;&emsp;抽样背景：某批产品中有 $a$ 件次品 $b$ 件合格品，我们分别采用两种抽样方式从中抽取 $n$ 件产品，问正好有 $k$ 件是次品的概率。

&emsp;&emsp;有放回抽样：把 $a+b$ 件产品进行编号，有放回抽样 $n$ 次，把可能的重复排列全体作为样本点，总数为 $(a+b)^n$ ，抽到一件次品时，是从 $a$ 件次品中选出一件，抽到合格品也是如此，那么有利场合（次品出现 $k$ 次）的数目是 $\binom{n}{k}a^kb^{n-k}$ ，故所求概率为

$$\begin{align\*}
b_k=\frac{\binom{n}{k}a^kb^{n-k}}{(a+b)^n}=\binom{n}{k}(\frac{a}{a+b})^k(\frac{b}{a+b})^{n-k}\\
\end{align\*}$$

&emsp;&emsp;验证发现， $b_k$ 是二项式 $(\frac{a}{a+b}+\frac{b}{a+b})^n$ 展开式的一般项，上述概率称为**二项分布**（具体定义将会在后续章节中阐明）。

&emsp;&emsp;无放回抽样：从 $a+b$ 件产品中取出 $n$ 件产品的可能组合全体作为样本点，总数为 $\binom{a+b}{n}$ ，其中有利场合数为 $\binom{a}{k}\binom{b}{n-k}$ ，故所求概率为 

$$\begin{align\*}
h_k=\frac{\binom{a}{k}\binom{b}{n-k}}{\binom{a+b}{n}}\\
\end{align\*}$$

&emsp;&emsp;这个概率被称为**超几何分布**。

&emsp;&emsp;事实上，因为

$$\begin{align\*}
h_k=\frac{\binom{a}{k}\binom{b}{n-k}}{\binom{a+b}{n}}=\frac{\frac{P(a,k)}{k!}\frac{P(b,n-k)}{(n-k)!}}{\frac{P(a+b,n)}{n!}}=\binom{n}{k}\frac{P(a,k)P(b,n-k)}{P(a+b,n)}\\
=\binom{n}{k}\frac{a^kb^{n-k}}{(a+b)^n}\frac{\frac{P(a,k)}{a^k}\frac{P(b,n-k)}{b^{n-k}}}{\frac{P(a+b,n)}{(a+b)^n}}
\end{align\*}$$

&emsp;&emsp;而当 $k$ 比 $a$ 小得多， $n-k$ 比 $b$ 小得多时：

$$\begin{align\*}
\frac{\frac{P(a,k)}{a^k}\frac{P(b,n-k)}{b^{n-k}}}{\frac{P(a+b,n)}{(a+b)^n}}\approx1
\end{align\*}$$

所以此时会有 $h_k\approx b_k$ 。

> 在实际工作中，抽样一般都会采用不放回的方式，但计算超几何分布的数值会比较麻烦，所以在产品数巨大但抽样数较小时，我们通常计算二项分布作为其近似值来节省工作量。另外，我们前面的讨论都是假定次品数已知，但实际问题中次品数是未知的，而我们就是希望通过抽样检查来确定次品的可能数目，也就是抽取一部分产品作为样本，然后用样本的次品率来估计整体的次品率。

## 几何概型

&emsp;&emsp;因为古典概型要求可能场合的总数必须有限，所以对于有无限多结果并且每种结果等可能的场合，古典概型无能为力。我们先来看几个简单的例子，再去思考如何解决这类问题。
- 例1：某人打开收音机听整点报时，求他等待的时间小于10分钟的概率。
- 例2：在5000平方千米的海域里有表面积40平方千米的区域有石油，求随意选取一点钻探钻到石油的概率。
- 例3：400毫升水中有一个大肠杆菌，求随机抽取2毫升观察能发现大肠杆菌的概率。

&emsp;&emsp;上述问题的答案似乎有些显然，对于例1，一小时中只有最后十分钟符合题意，那概率就是 $\frac{1}{6}$ ，对于例2，概率就是 $\frac{40}{5000}$ ，对于例3，概率就是 $\frac{2}{400}$ 。在这些问题中，实验的可能结果是某区域 $\Omega$ 中的一个小区域，这个区域可以是一维的、二维的、三维的，甚至是 $n$ 维的，这时不管是可能结果的全体还是我们所感兴趣的结果都是无限的。因而等可能性是通过下列方式来赋予意义的：落在某区域 $g$ 的概率与该区域的测度（长度，面积，体积等）成正比并且与位置及形状无关。

&emsp;&emsp;因此，若以事件 $A_g$ 表示“在区域 $\Omega$ 中随机地取一点，而该点落在区域 $g$ 中”这一事件，则该事件的概率定义为

$$\begin{align\*}
P(A_g)=\frac{g的测度}{\Omega的测度}
\end{align\*}$$

下面我们再来举几个例子，


















