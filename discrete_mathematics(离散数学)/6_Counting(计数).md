# 第六章 计数
## 排列和组合

### 排列

所谓排列，就是对集合中的部分元素进行一种安排，这种安排是有顺序的，比如说对于集合S={a,b,c}，在集合S中任意选取两个元素进行排列，就可以得到六种排列：a,b；a,c；b,a；b,c；c,a；c,b。

对于n元素集中r个元素的有序安排称为**r排列**，记作**P(n,r)**

定理：具有n个不同元素的集合的r排列个数为：

$$\begin{align\*}
P(n,r)=n(n-1)(n-2)\cdot\cdot\cdot(n-r+1)
\end{align\*}$$

> 证明是非常容易的，选取这个排列的第一个元素有n种方法，选取第二个元素有n-1种方法，...，选择第r个元素时有n-(r-1)=n-r+1种方法，由乘法法则易得上式。

- 显然 $P(n,r)=\frac{n!}{(n-r)!}$， $P(n,n)=n!$ 
- 另外，只要n是一个非负整数，就有P(n,0)=1。(因为恰好只有一种方法来排列0个元素，也叫做空排列)

> 另外，排列可以看作是从r元集合到n元集合做单射，以r元集合作为定义域，也就是有r个位置，每个位置都去对应n元集合中的一个元素，不难理解，n元集合中任意两个不同的元素如果有位置的话，那么都会对应不同的位置，所以做排列的过程也可以视为做单射的过程。

例：字母ABCDEFGH有多少种排列包含ABC？

解：鉴于ABC必须成组出现，我们可以视集合中有六个对象，分别是ABC，D，E，F，G，H，这6个对象可以按任意次序出现，也就是有6!=720种排列。

关于阶乘的一些补充：

$$\begin{align\*}
n!\approx\sqrt{2\pi n}\cdot(\frac{n}{e})^n(Stirling近似)
\end{align\*}$$

### 组合

相比于排列，组合更加的自然。对集合中的部分元素放在一块，就是组合。它是无顺序的，随意地从集合中选出来放在一起即可。比如说对于集合S={a,b,c}，在集合S中任意选取两个元素进行组合，就可以得到三种组合：a,b；b,c；c,a。

对于n元素集中r个元素的无序选取称为**r组合**，记作**C(n,r)** ，也可以记作 $\binom{n}{r}$ (这也被称作是二项式系数)。

$$\begin{align\*}
n元素集合的r组合数等于\\
C(n,r)=\frac{n!}{r!(n-r)!}
\end{align\*}$$

证明：我们考虑n元素集合的r排列，即P(n,r)，之后我们换一种思路去得到一个r排列：先从n元素集中选出r个元素，即C(n,r)，再对这r个元素进行排列，即P(r,r)，那么我们有：

$$\begin{align\*}
P(n,r)=C(n,r)P(r,r)\\
C(n,r)=\frac{P(n,r)}{P(r,r)}=\frac{\frac{n!}{(n-r)!}}{r!}=\frac{n!}{r!(n-r)!}\\
\end{align\*}$$

- 由公式易得， $C(n,r)=C(n,n-r)$ ，这也不难理解，当你从n元素集合中选取了r个元素，剩下的n-r元素也就唯一确定了。

补充：

```math
如果0\leq p\leq 1,q=1-p,n\rightarrow\infty,那么\\\\
\begin{pmatrix}n\\pn\end{pmatrix}\approx\frac{1}{\sqrt{2\pi}}(p^pq^q)^{-n}(pqn)^{-\frac1 2}(Stirling近似)
```

### 组合证明

组合证明是指不依靠代数技巧而使用计数论述或者基于等式两边的对象集合存在一个双射函数来证明。简单地来讲，所谓依靠代数技巧，其实就是把组合或者排列中的阶乘之类的展开合并，单纯考虑这个式子的计算过程而忽视其代表的意义，而使用计数论述，意思是对于同一种结果，走两种不同的方法，以此来证明两种方法产生的组合式是恒等的，这被称为双计数证明，构造双射函数被称为双射证明

比较难懂，我们举例子来看。

证明 $C(n,r)=C(n,n-r)$ 

双计数证明： $C(n,r)$ 是集合S中含有r个元素的子集A的个数，但S的子集A也确定了不在A中的元素，即 $\overline{A}$ ，r个元素的补集有 $n-r$ 个，所以具有r个元素的子集数目也是 $C(n,r)$ ，故等式成立。

双射证明：从S的子集A到 $\overline{A}$ 的一个函数是从r个元素的子集到n-r个元素的子集的双射函数，该函数的定义域是 $C(n,r)$ 个含有r个元素的子集，该函数的值域是 $C(n,n-r)$ 个含有n-r个元素的子集，（其实这个函数就是指求某个集合的补集），易得这是一个双射函数，故两个集合具有相同的元素个数，等式成立。




## 二项式系数和恒等式

什么是二项式？

所谓**二项式**，不过是两项的和，比如x+y

那么二项式定理，其实就有关于二项式幂的展开式。比如拿 $(x+y)^3$ 来举例， $(x+y)^3$ 其实就是 $(x+y)(x+y)(x+y)$ ,这三个括号中分别各是一个二项式，如果我们要得到 $x^3$ ,那就让每个括号中的二项式都贡献一个 $x$ ,也就是 $\binom{3}{3}$ ,如果我们要得到 $xy^2$ ,我们就从三个二项式中选取两个贡献 $y$ ,剩下的那个自然会贡献 $x$ ,也就是 $\binom{3}{2}$ ，其余的项也同理，这样我们就能得到对应项的系数。

一般地，我们有如下的结论（二项式定理）：

$$\begin{align\*}
(x+y)^n=\sum_{j=0}^n\binom{n}{j}x^{n-j}y^j=\binom{n}{0}x^n+\binom{n}{1}x^{n-1}y+\cdot\cdot\cdot+\binom{n}{n-1}xy^{n-1}+\binom{n}{n}y^n
\end{align\*}$$

- 对于任意的一项 $x^{n-j}y^j$ ,其实就是 $n-j$ 个 $(x+y)$ 贡献了x，而 $j$ 个 $(x+y)$ 贡献了y。
- 取x=1，y=1，则有 $\sum_{j=0}^n\binom{n}{j}=2^n$ 
- 取x=1，y=-1，则有 $\sum_{j=0}^n(-1)^j\binom{n}{j}=0$ 
- 上面两式相加减，可得 $\binom{n}{0}+\binom{n}{2}+\binom{n}{4}+\cdot\cdot\cdot=\binom{n}{1}+\binom{n}{3}+\binom{n}{5}+\cdot\cdot\cdot=2^{n-1}$ 
- 取x=1，y=-1，则有 $\sum_{j=0}^n(p)^j\binom{n}{j}=(p+1)^j$ 

### 组合恒等式

